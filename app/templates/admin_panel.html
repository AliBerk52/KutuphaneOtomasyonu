{% extends "base.html" %}

{% block title %}Admin YÃ¶netim Paneli{% endblock %}

{% block content %}
<header>
    <h1>Admin YÃ¶netim Paneli</h1>
    <nav>
        <a href="/dashboard">KÃ¼tÃ¼phane Paneli</a>
        <a href="#" onclick="logout()">Ã‡Ä±kÄ±ÅŸ Yap</a>
    </nav>
</header>

<div class="container">
    <section style="margin-bottom: 50px;">
        <h2>ğŸ“‹ TÃ¼m KullanÄ±cÄ± Ã–dÃ¼nÃ§ Ä°ÅŸlemleri</h2>
        <p>Sistemdeki tÃ¼m aktif ve tamamlanmÄ±ÅŸ Ã¶dÃ¼nÃ§ alma kayÄ±tlarÄ± aÅŸaÄŸÄ±da listelenmektedir.</p>
        
        <table id="adminLoanTable" class="table">
            <thead>
                <tr>
                    <th>KullanÄ±cÄ± E-posta</th>
                    <th>Kitap AdÄ±</th>
                    <th>Ã–dÃ¼nÃ§ Tarihi</th>
                    <th>Durum</th>
                </tr>
            </thead>
            <tbody id="adminAllLoansTable">
                <tr><td colspan="4" style="text-align: center;">YÃ¼kleniyor...</td></tr>
            </tbody>
        </table>
    </section>

    <hr>

    <section style="margin-top: 30px; opacity: 0.8;">
        <h3>ğŸ› ï¸ API YÃ¶netim Bilgileri</h3>
        <ul>
            <li>**Kategori Ekle:** POST /api/v1/admin/categories</li>
            <li>**Yazar Ekle:** POST /api/v1/admin/authors</li>
            <li>**Kitap Ekle:** POST /api/v1/books/</li>
        </ul>
        <p><small>Not: Bu iÅŸlemler iÃ§in Admin Token'Ä± gereklidir.</small></p>
    </section>
</div>
{% endblock %}

{% block body_extra %}
<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
<script>
    // Sayfa yÃ¼klendiÄŸinde admin verilerini getir
    document.addEventListener('DOMContentLoaded', function() {
        if (typeof loadAllUserLoans === "function") {
            loadAllUserLoans();
        } else {
            console.error("loadAllUserLoans fonksiyonu dashboard.js iÃ§inde bulunamadÄ±!");
        }
    });

    function logout() {
        localStorage.clear();
        window.location.href = '/login';
    }
</script>
{% endblock %}